syntax = "proto3";

package containerd.services.snapshots.v1;

import "google/api/annotations.proto";
import "containerd/types/mount.proto";

service Snapshots {
  rpc Prepare (PrepareSnapshotRequest) returns (PrepareSnapshotResponse);
  rpc View (ViewSnapshotRequest) returns (ViewSnapshotResponse);
  rpc Commit (CommitSnapshotRequest) returns (CommitSnapshotResponse);
  rpc Remove (RemoveSnapshotRequest) returns (google.protobuf.Empty);
  rpc Stat (StatSnapshotRequest) returns (StatSnapshotResponse);
  rpc Update (UpdateSnapshotRequest) returns (UpdateSnapshotResponse);
  rpc List (ListSnapshotsRequest) returns (ListSnapshotsResponse);
  rpc Usage (UsageRequest) returns (UsageResponse);
  rpc Cleanup (CleanupRequest) returns (CleanupResponse);
}

message PrepareSnapshotRequest {
  string snapshotter = 1;
  string key = 2;
  string parent = 3;
  map<string, string> labels = 4;
}

message PrepareSnapshotResponse {
  repeated containerd.types.Mount mounts = 1;
}